/***************************************************************************
 * ROM Properties Page shell extension. (librptexture)                     *
 * VkEnumStrings.cpp: Vulkan string tables.                                *
 *                                                                         *
 * Copyright (c) 2016-2022 by David Korth.                                 *
 * SPDX-License-Identifier: GPL-2.0-or-later                               *
 ***************************************************************************/

#include "stdafx.h"
#include "VkEnumStrings.hpp"
#include "fileformat/vk_defs.h"

namespace LibRpTexture { namespace VkEnumStrings {

static const char8_t vkEnum_base_strtbl[] = {
	U8("\0")

	// 0
	U8("UNDEFINED\0")
	U8("R4G4_UNORM_PACK8\0")
	U8("R4G4B4A4_UNORM_PACK16\0")
	U8("B4G4R4A4_UNORM_PACK16\0")
	U8("R5G6B5_UNORM_PACK16\0")
	U8("B5G6R5_UNORM_PACK16\0")
	U8("R5G5B5A1_UNORM_PACK16\0")
	U8("B5G5R5A1_UNORM_PACK16\0")
	U8("A1R5G5B5_UNORM_PACK16\0")
	U8("R8_UNORM\0")

	// 10
	U8("R8_SNORM\0")
	U8("R8_USCALED\0")
	U8("R8_SSCALED\0")
	U8("R8_UINT\0")
	U8("R8_SINT\0")
	U8("R8_SRGB\0")
	U8("R8G8_UNORM\0")
	U8("R8G8_SNORM\0")
	U8("R8G8_USCALED\0")
	U8("R8G8_SSCALED\0")

	// 20
	U8("R8G8_UINT\0")
	U8("R8G8_SINT\0")
	U8("R8G8_SRGB\0")
	U8("R8G8B8_UNORM\0")
	U8("R8G8B8_SNORM\0")
	U8("R8G8B8_USCALED\0")
	U8("R8G8B8_SSCALED\0")
	U8("R8G8B8_UINT\0")
	U8("R8G8B8_SINT\0")
	U8("R8G8B8_SRGB\0")

	// 30
	U8("B8G8R8_UNORM\0")
	U8("B8G8R8_SNORM\0")
	U8("B8G8R8_USCALED\0")
	U8("B8G8R8_SSCALED\0")
	U8("B8G8R8_UINT\0")
	U8("B8G8R8_SINT\0")
	U8("B8G8R8_SRGB\0")
	U8("R8G8B8A8_UNORM\0")
	U8("R8G8B8A8_SNORM\0")
	U8("R8G8B8A8_USCALED\0")

	// 40
	U8("R8G8B8A8_SSCALED\0")
	U8("R8G8B8A8_UINT\0")
	U8("R8G8B8A8_SINT\0")
	U8("R8G8B8A8_SRGB\0")
	U8("B8G8R8A8_UNORM\0")
	U8("B8G8R8A8_SNORM\0")
	U8("B8G8R8A8_USCALED\0")
	U8("B8G8R8A8_SSCALED\0")
	U8("B8G8R8A8_UINT\0")
	U8("B8G8R8A8_SINT\0")

	// 50
	U8("B8G8R8A8_SRGB\0")
	U8("A8B8G8R8_UNORM_PACK32\0")
	U8("A8B8G8R8_SNORM_PACK32\0")
	U8("A8B8G8R8_USCALED_PACK32\0")
	U8("A8B8G8R8_SSCALED_PACK32\0")
	U8("A8B8G8R8_UINT_PACK32\0")
	U8("A8B8G8R8_SINT_PACK32\0")
	U8("A8B8G8R8_SRGB_PACK32\0")
	U8("A2R10G10B10_UNORM_PACK32\0")
	U8("A2R10G10B10_SNORM_PACK32\0")

	// 60
	U8("A2R10G10B10_USCALED_PACK32\0")
	U8("A2R10G10B10_SSCALED_PACK32\0")
	U8("A2R10G10B10_UINT_PACK32\0")
	U8("A2R10G10B10_SINT_PACK32\0")
	U8("A2B10G10R10_UNORM_PACK32\0")
	U8("A2B10G10R10_SNORM_PACK32\0")
	U8("A2B10G10R10_USCALED_PACK32\0")
	U8("A2B10G10R10_SSCALED_PACK32\0")
	U8("A2B10G10R10_UINT_PACK32\0")
	U8("A2B10G10R10_SINT_PACK32\0")

	// 70
	U8("R16_UNORM\0")
	U8("R16_SNORM\0")
	U8("R16_USCALED\0")
	U8("R16_SSCALED\0")
	U8("R16_UINT\0")
	U8("R16_SINT\0")
	U8("R16_SFLOAT\0")
	U8("R16G16_UNORM\0")
	U8("R16G16_SNORM\0")
	U8("R16G16_USCALED\0")

	// 80
	U8("R16G16_SSCALED\0")
	U8("R16G16_UINT\0")
	U8("R16G16_SINT\0")
	U8("R16G16_SFLOAT\0")
	U8("R16G16B16_UNORM\0")
	U8("R16G16B16_SNORM\0")
	U8("R16G16B16_USCALED\0")
	U8("R16G16B16_SSCALED\0")
	U8("R16G16B16_UINT\0")
	U8("R16G16B16_SINT\0")

	// 90
	U8("R16G16B16_SFLOAT\0")
	U8("R16G16B16A16_UNORM\0")
	U8("R16G16B16A16_SNORM\0")
	U8("R16G16B16A16_USCALED\0")
	U8("R16G16B16A16_SSCALED\0")
	U8("R16G16B16A16_UINT\0")
	U8("R16G16B16A16_SINT\0")
	U8("R16G16B16A16_SFLOAT\0")
	U8("R32_UINT\0")
	U8("R32_SINT\0")

	// 100
	U8("R32_SFLOAT\0")
	U8("R32G32_UINT\0")
	U8("R32G32_SINT\0")
	U8("R32G32_SFLOAT\0")
	U8("R32G32B32_UINT\0")
	U8("R32G32B32_SINT\0")
	U8("R32G32B32_SFLOAT\0")
	U8("R32G32B32A32_UINT\0")
	U8("R32G32B32A32_SINT\0")
	U8("R32G32B32A32_SFLOAT\0")

	// 110
	U8("R64_UINT\0")
	U8("R64_SINT\0")
	U8("R64_SFLOAT\0")
	U8("R64G64_UINT\0")
	U8("R64G64_SINT\0")
	U8("R64G64_SFLOAT\0")
	U8("R64G64B64_UINT\0")
	U8("R64G64B64_SINT\0")
	U8("R64G64B64_SFLOAT\0")
	U8("R64G64B64A64_UINT\0")

	// 120
	U8("R64G64B64A64_SINT\0")
	U8("R64G64B64A64_SFLOAT\0")
	U8("B10G11R11_UFLOAT_PACK32\0")
	U8("E5B9G9R9_UFLOAT_PACK32\0")
	U8("D16_UNORM\0")
	U8("X8_D24_UNORM_PACK32\0")
	U8("D32_SFLOAT\0")
	U8("S8_UINT\0")
	U8("D16_UNORM_S8_UINT\0")
	U8("D24_UNORM_S8_UINT\0")

	// 130
	U8("D32_SFLOAT_S8_UINT\0")
	U8("BC1_RGB_UNORM_BLOCK\0")
	U8("BC1_RGB_SRGB_BLOCK\0")
	U8("BC1_RGBA_UNORM_BLOCK\0")
	U8("BC1_RGBA_SRGB_BLOCK\0")
	U8("BC2_UNORM_BLOCK\0")
	U8("BC2_SRGB_BLOCK\0")
	U8("BC3_UNORM_BLOCK\0")
	U8("BC3_SRGB_BLOCK\0")
	U8("BC4_UNORM_BLOCK\0")

	// 140
	U8("BC4_SNORM_BLOCK\0")
	U8("BC5_UNORM_BLOCK\0")
	U8("BC5_SNORM_BLOCK\0")
	U8("BC6H_UFLOAT_BLOCK\0")
	U8("BC6H_SFLOAT_BLOCK\0")
	U8("BC7_UNORM_BLOCK\0")
	U8("BC7_SRGB_BLOCK\0")
	U8("ETC2_R8G8B8_UNORM_BLOCK\0")
	U8("ETC2_R8G8B8_SRGB_BLOCK\0")
	U8("ETC2_R8G8B8A1_UNORM_BLOCK\0")

	// 150
	U8("ETC2_R8G8B8A1_SRGB_BLOCK\0")
	U8("ETC2_R8G8B8A8_UNORM_BLOCK\0")
	U8("ETC2_R8G8B8A8_SRGB_BLOCK\0")
	U8("EAC_R11_UNORM_BLOCK\0")
	U8("EAC_R11_SNORM_BLOCK\0")
	U8("EAC_R11G11_UNORM_BLOCK\0")
	U8("EAC_R11G11_SNORM_BLOCK\0")
	U8("ASTC_4x4_UNORM_BLOCK\0")
	U8("ASTC_4x4_SRGB_BLOCK\0")
	U8("ASTC_5x4_UNORM_BLOCK\0")

	// 160
	U8("ASTC_5x4_SRGB_BLOCK\0")
	U8("ASTC_5x5_UNORM_BLOCK\0")
	U8("ASTC_5x5_SRGB_BLOCK\0")
	U8("ASTC_6x5_UNORM_BLOCK\0")
	U8("ASTC_6x5_SRGB_BLOCK\0")
	U8("ASTC_6x6_UNORM_BLOCK\0")
	U8("ASTC_6x6_SRGB_BLOCK\0")
	U8("ASTC_8x5_UNORM_BLOCK\0")
	U8("ASTC_8x5_SRGB_BLOCK\0")
	U8("ASTC_8x6_UNORM_BLOCK\0")

	// 170
	U8("ASTC_8x6_SRGB_BLOCK\0")
	U8("ASTC_8x8_UNORM_BLOCK\0")
	U8("ASTC_8x8_SRGB_BLOCK\0")
	U8("ASTC_10x5_UNORM_BLOCK\0")
	U8("ASTC_10x5_SRGB_BLOCK\0")
	U8("ASTC_10x6_UNORM_BLOCK\0")
	U8("ASTC_10x6_SRGB_BLOCK\0")
	U8("ASTC_10x8_UNORM_BLOCK\0")
	U8("ASTC_10x8_SRGB_BLOCK\0")
	U8("ASTC_10x10_UNORM_BLOCK\0")

	// 180
	U8("ASTC_10x10_SRGB_BLOCK\0")
	U8("ASTC_12x10_UNORM_BLOCK\0")
	U8("ASTC_12x10_SRGB_BLOCK\0")
	U8("ASTC_12x12_UNORM_BLOCK\0")
	U8("ASTC_12x12_SRGB_BLOCK\0")
};

static const uint16_t vkEnum_base_offtbl[] = {
	// 0
	1, 11, 28, 50, 72, 92, 112, 134, 156, 178,
	// 10
	187, 196, 207, 218, 226, 234, 242, 253, 264, 277,
	// 20
	290, 300, 310, 320, 333, 346, 361, 376, 388, 400,
	// 30
	412, 425, 438, 453, 468, 480, 492, 504, 519, 534,
	// 40
	551, 568, 582, 596, 610, 625, 640, 657, 674, 688,
	// 50
	702, 716, 738, 760, 784, 808, 829, 850, 871, 896,
	// 60
	921, 948, 975, 999, 1023, 1048, 1073, 1100, 1127, 1151,
	// 70
	1175, 1185, 1195, 1207, 1219, 1228, 1237, 1248, 1261, 1274,
	// 80
	1289, 1304, 1316, 1328, 1342, 1358, 1374, 1392, 1410, 1425,
	// 90
	1440, 1457, 1476, 1495, 1516, 1537, 1555, 1573, 1593, 1602,
	// 100
	1611, 1622, 1634, 1646, 1660, 1675, 1690, 1707, 1725, 1743,
	// 110
	1763, 1772, 1781, 1792, 1804, 1816, 1830, 1845, 1860, 1877,
	// 120
	1895, 1913, 1933, 1957, 1980, 1990, 2010, 2021, 2029, 2047,
	// 130
	2065, 2084, 2104, 2123, 2144, 2164, 2180, 2195, 2211, 2226,
	// 140
	2242, 2258, 2274, 2290, 2308, 2326, 2342, 2357, 2381, 2404,
	// 150
	2430, 2455, 2481, 2506, 2526, 2546, 2569, 2592, 2613, 2633,
	// 160
	2654, 2674, 2695, 2715, 2736, 2756, 2777, 2797, 2818, 2838,
	// 170
	2859, 2879, 2900, 2920, 2942, 2963, 2985, 3006, 3028, 3049,
	// 180
	3072, 3094, 3117, 3139, 3162,
};

static const char8_t vkEnum_1000156xxx_strtbl[] = {
	U8("\0")

	// 1000156000
	U8("G8B8G8R8_422_UNORM\0")
	U8("B8G8R8G8_422_UNORM\0")
	U8("G8_B8_R8_3PLANE_420_UNORM\0")
	U8("G8_B8R8_2PLANE_420_UNORM\0")
	U8("G8_B8_R8_3PLANE_422_UNORM\0")
	U8("G8_B8R8_2PLANE_422_UNORM\0")
	U8("G8_B8_R8_3PLANE_444_UNORM\0")
	U8("R10X6_UNORM_PACK16\0")
	U8("R10X6G10X6_UNORM_2PACK16\0")
	U8("R10X6G10X6B10X6A10X6_UNORM_4PACK16\0")

	// 1000156010
	U8("G10X6B10X6G10X6R10X6_422_UNORM_4PACK16\0")
	U8("B10X6G10X6R10X6G10X6_422_UNORM_4PACK16\0")
	U8("G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16\0")
	U8("G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16\0")
	U8("G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16\0")
	U8("G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16\0")
	U8("G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16\0")
	U8("R12X4_UNORM_PACK16\0")
	U8("R12X4G12X4_UNORM_2PACK16\0")
	U8("R12X4G12X4B12X4A12X4_UNORM_4PACK16\0")

	// 1000156020
	U8("G12X4B12X4G12X4R12X4_422_UNORM_4PACK16\0")
	U8("B12X4G12X4R12X4G12X4_422_UNORM_4PACK16\0")
	U8("G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16\0")
	U8("G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16\0")
	U8("G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16\0")
	U8("G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16\0")
	U8("G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16\0")
	U8("G16B16G16R16_422_UNORM\0")
	U8("B16G16R16G16_422_UNORM\0")
	U8("G16_B16_R16_3PLANE_420_UNORM\0")

	// 1000156030
	U8("G16_B16R16_2PLANE_420_UNORM\0")
	U8("G16_B16_R16_3PLANE_422_UNORM\0")
	U8("G16_B16R16_2PLANE_422_UNORM\0")
	U8("G16_B16_R16_3PLANE_444_UNORM\0")
};

static const uint16_t vkEnum_1000156xxx_offtbl[] = {
	// 1000156000
	1, 20, 39, 65, 90, 116, 141, 167, 186, 211,
	// 1000156010
	246, 285, 324, 367, 409, 452, 494, 537, 556, 581,
	// 1000156020
	616, 655, 694, 737, 779, 822, 864, 907, 930, 953,
	// 1000156030
	982, 1010, 1039, 1067,
};

static const char8_t vkEnum_PVRTC_strtbl[] = {
	U8("\0")

	// 1000054000
	U8("PVRTC1_2BPP_UNORM_BLOCK_IMG\0")
	U8("PVRTC1_4BPP_UNORM_BLOCK_IMG\0")
	U8("PVRTC2_2BPP_UNORM_BLOCK_IMG\0")
	U8("PVRTC2_4BPP_UNORM_BLOCK_IMG\0")
	U8("PVRTC1_2BPP_SRGB_BLOCK_IMG\0")
	U8("PVRTC1_4BPP_SRGB_BLOCK_IMG\0")
	U8("PVRTC2_2BPP_SRGB_BLOCK_IMG\0")
	U8("PVRTC2_4BPP_SRGB_BLOCK_IMG\0")
};

static const uint16_t vkEnum_PVRTC_offtbl[] = {
	// 1000054000
	1, 29, 57, 85, 113, 140, 167, 194,
};

static const char8_t vkEnum_ASTC_strtbl[] = {
	U8("\0")

	// 1000066000
	U8("ASTC_4x4_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_5x4_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_5x5_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_6x5_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_6x6_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_8x5_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_8x6_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_8x8_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_10x5_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_10x6_SFLOAT_BLOCK_EXT\0")

	// 1000066010
	U8("ASTC_10x8_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_10x10_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_12x10_SFLOAT_BLOCK_EXT\0")
	U8("ASTC_12x12_SFLOAT_BLOCK_EXT\0")
};

static const uint16_t vkEnum_ASTC_offtbl[] = {
	// 1000066000
	1, 27, 53, 79, 105, 131, 157, 183, 209, 236,
	// 1000066010
	263, 290, 318, 346,
};

/** Public functions **/

/**
 * Look up a Vulkan VkFormat enum string.
 * @param vkFormat	[in] vkFormat enum
 * @return String, or nullptr if not found.
 */
const char8_t *lookup_vkFormat(unsigned int vkFormat)
{
	const char8_t *tbl = nullptr;
	uint16_t offset = 0;
	if (/*vkFormat >= VK_FORMAT_UNDEFINED &&*/
	      vkFormat <= VK_FORMAT_ASTC_12x12_SRGB_BLOCK)
	{
		tbl = vkEnum_base_strtbl;
		offset = vkEnum_base_offtbl[vkFormat];
	}
	else if (vkFormat >= VK_FORMAT_G8B8G8R8_422_UNORM &&
	         vkFormat <= VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM)
	{
		tbl = vkEnum_1000156xxx_strtbl;
		offset = vkEnum_1000156xxx_offtbl[vkFormat - VK_FORMAT_G8B8G8R8_422_UNORM];
	}
	else if (vkFormat >= VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG &&
	         vkFormat <= VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG)
	{
		tbl = vkEnum_PVRTC_strtbl;
		offset = vkEnum_PVRTC_offtbl[vkFormat - VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG];
	}
	else if (vkFormat >= VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT &&
	         vkFormat <= VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT)
	{
		tbl = vkEnum_ASTC_strtbl;
		offset = vkEnum_ASTC_offtbl[vkFormat - VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT];
	}

	if (!tbl || offset == 0) {
		return nullptr;
	}
	return &tbl[offset];
}

} }
